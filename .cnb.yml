# .cnb.yml
$:
  # vscode 事件：专供页面中启动远程开发用
  vscode:
    - docker:
        # 自定义开发环境
        build:
          # 指定构建镜像的 Dockerfile 文件
          dockerfile: .ide/Dockerfile
          # 用来声明缓存构建过程中依赖的文件列表。
          # 注意：如果构建过程有用到其他文件，也需要在此处声明
          # 参考文档：https://docs.cnb.cool/zh/grammar/pipeline.html#build
          by:
            - .ide/settings.json
            - .ide/create_languagepacks
      services:
        # 声明使用 vscode 服务
        - vscode
        # 声明在容器中支持 docker 命令
        - docker
      # stages:
      #   # 环境启动后需要执行的命令
      #   - name: ls
      #     script: ls -al
main:
  push:
    imports:
        - https://cnb.cool/rukiyz/secret/-/blob/main/github.yml
    stages:
        - name: sync to github
          image: tencentcom/git-sync
          settings:
            target_url: https://github.com/rukiy/AzerothCore-with-Playerbots-Docker-Setup.git
            auth_type: https
            username: ${GITHUB_USERNAME}
            password: ${GITHUB_ACCESS_TOKEN}